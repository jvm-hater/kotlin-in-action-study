- μ½”ν‹€λ¦°μ—μ„ μ λ„¤λ¦­ ν΄λμ¤μ™€ ν•¨μλ¥Ό μ„ μ–Έν•κ³  μ‚¬μ©ν•λ” κΈ°λ³Έ κ°λ…μ€ μλ°”μ™€ λΉ„μ·ν•λ‹¤.
- μ‹¤μ ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ©΄ μΈλΌμΈ ν•¨μ νΈμ¶μ—μ„ νƒ€μ… μΈμλ΅ μ“°μΈ κµ¬μ²΄μ μΈ νƒ€μ…μ„ μ‹¤ν–‰ μ‹μ μ— μ• μ μλ‹¤. (μΌλ° ν΄λμ¤λ‚ ν•¨μμ κ²½μ° νƒ€μ… μΈμ μ •λ³΄κ°€ μ‹¤ν–‰ μ‹μ μ— μ‚¬λΌμ§€κΈ° λ•λ¬Έμ— μ΄λ° μΌμ΄ λ¶κ°€λ¥ν•λ‹¤.)
- `List<Any>`λ¥Ό μΈμλ΅ λ°›λ” ν•¨μμ—κ² `List<Int>` νƒ€μ… κ°’μ„ μ „λ‹¬ν•  μ μμ„μ§€ μ—¬λ¶€λ¥Ό **μ„ μ–Έ μ§€μ  λ³€μ„±**μ„ ν†µν•΄ μ§€μ •ν•  μ μλ‹¤.
- μλ°”μ **μ™€μΌλ“μΉ΄λ“**λ” μ½”ν‹€λ¦° **μ„ μ–Έ μ§€μ  λ³€μ„±**κ³Ό κ°™μ€ μ—­ν• μ„ ν•λ‹¤.

# 1οΈβƒ£Β μ λ„¤λ¦­ νƒ€μ… νλΌλ―Έν„°

- μ λ„¤λ¦­μ¤λ¥Ό μ‚¬μ©ν•λ©΄ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ°›λ” νƒ€μ…μ„ μ •μν•  μ μλ‹¤.
- μ λ„¤λ¦­ νƒ€μ…μ μΈμ¤ν„΄μ¤λ¥Ό λ§λ“λ ¤λ©΄ νƒ€μ… νλΌλ―Έν„°λ¥Ό κµ¬μ²΄μ μΈ νƒ€μ… μΈμλ΅ μΉν™ν•΄μ•Ό ν•λ‹¤.
- μλ¥Ό λ“¤μ–΄ Map ν΄λμ¤λ” ν‚¤ νƒ€μ…κ³Ό κ°’ νƒ€μ…μ„ νƒ€μ… νλΌλ―Έν„°λ΅ λ°›μΌλ―€λ΅ `Map<K,V>`κ°€ λλ‹¤. μ΄λ° μ λ„¤λ¦­ ν΄λμ¤μ— `Map<String, Person>`μ²λΌ κµ¬μ²΄μ μΈ νƒ€μ…μ„ νƒ€μ… μΈμλ΅ λ„κΈ°λ©΄ μΈμ¤ν„΄μ¤ν™”ν•  μ μλ‹¤.
- μ°Έκ³ λ΅ `val readers = mutableListOf(β€stringβ€)` μ²λΌ μ»΄νμΌλ¬κ°€ μ¶”λ΅ ν•  μ μμΌλ©΄ μΈμ¤ν„΄μ¤ν™”κ°€ κ°€λ¥ν•λ‹¤.

<aside>
π’΅ μλ°”μ™€ λ‹¬λ¦¬ μ½”ν‹€λ¦°μ—μ„λ” μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμλ¥Ό ν”„λ΅κ·Έλλ¨Έκ°€ λ…μ‹ν•κ±°λ‚ μ»΄νμΌλ¬κ°€ μ¶”λ΅ ν•  μ μμ–΄μ•Ό ν•λ‹¤.

</aside>

## 1) μ λ„¤λ¦­ ν•¨μμ™€ ν”„λ΅νΌν‹°

- μ»¬λ ‰μ…μ„ λ‹¤λ£¨λ” λΌμ΄λΈλ¬λ¦¬ ν•¨μλ” λ€λ¶€λ¶„ μ λ„¤λ¦­ ν•¨μλ‹¤.
- μ λ„¤λ¦­ ν•¨μλ¥Ό νΈμ¶ν•  λ•λ” λ°λ“μ‹ κµ¬μ²΄μ  νƒ€μ…μΌλ΅ νƒ€μ… μΈμλ¥Ό λ„κ²¨μ•Ό ν•λ‹¤.

**μ λ„¤λ¦­ ν•¨μ νΈμ¶ν•κΈ°**

```kotlin
/*νƒ€μ… νλΌλ―Έν„° μ„ μ–Έ*/ /*νƒ€μ… νλΌλ―Έν„°κ°€ μμ‹  κ°μ²΄μ™€ λ°ν™ νƒ€μ…μ— μ“°μΈλ‹¤.*/
public fun <T> List<T>.slice(indices: Iterable<Int>): List<T> {
    ...
}

val letters = ('a'..'z').toList()
letters.slice(10..13)  // μ»΄νμΌλ¬λ” μ—¬κΈ°μ„ Tκ°€ CharλΌλ” μ‚¬μ‹¤μ„ μ¶”λ΅ ν•λ‹¤.
```

**μ λ„¤λ¦­ κ³ μ°¨ ν•¨μ νΈμ¶ν•κΈ°**

```kotlin
public inline fun <T> Iterable<T>.filter(predicate: (T) -> Boolean): List<T> {
    return filterTo(ArrayList<T>(), predicate)
}

val authors = listOf("a", "b")
val readers = listOf("c", "d")
authors.filter { it !in readers }
```

- λλ‹¤ νλΌλ―Έν„°μ— λ€ν•΄ μλ™μΌλ΅ λ°λ“¤μ–΄μ§„ λ³€μ itμ νƒ€μ…μ€ TλΌλ” μ λ„¤λ¦­ νƒ€μ…μ΄λ‹¤.
- μ»΄νμΌλ¬λ” filterκ°€ List<T> νƒ€μ…μ λ¦¬μ¤νΈμ— λ€ν•΄ νΈμ¶λ  μ μλ‹¤λ” μ‚¬μ‹¤κ³Ό filterμ μμ‹  κ°μ²΄μΈ readerμ νƒ€μ…μ΄ List<String>μ΄λΌλ” μ‚¬μ‹¤μ„ μ•κ³  Tκ°€ Stringμ΄λΌλ” μ‚¬μ‹¤μ„ μ¶”λ΅ ν•λ‹¤.

**μ λ„¤λ¦­ ν™•μ¥ ν”„λ΅νΌν‹°**

```kotlin
val <T> List<T>.penultimate: T
    get() = this[size - 1]

**val <T> x: T = TODO() // μ»΄νμΌ μ—λ¬**
```

- μ°Έκ³ λ΅ μΌλ°(ν™•μ¥μ΄ μ•„λ‹) ν”„λ΅νΌν‹°λ”  νƒ€μ… νλΌλ―Έν„°λ¥Ό κ°€μ§ μ μ—†λ‹¤. ν΄λμ¤ ν”„λ΅νΌν‹°μ— μ—¬λ¬ νƒ€μ… κ°’μ„ μ €μ¥ν•λ‹¤λ” κ±΄ λ§μ΄ λμ§€ μ•λ”λ‹¤.

## 2) μ λ„¤λ¦­ ν΄λμ¤ μ„ μ–Έ

- μλ°”μ™€ λ§μ°¬κ°€μ§€λ΅ μ½”ν‹€λ¦°μ—μ„λ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„£μ€ κΊΎμ‡  κΈ°νΈ(<>)λ¥Ό ν΄λμ¤(λλ” μΈν„°νμ΄μ¤) μ΄λ¦„ λ’¤μ— λ¶™μ΄λ©΄ ν΄λμ¤λ¥Ό μ λ„¤λ¦­ν•κ² λ§λ“¤ μ μλ‹¤.

```kotlin
interface GenericList<T> {  // TλΌλ” νƒ€μ… νλΌλ―Έν„°λ¥Ό μ •μν•λ‹¤.
    operator fun get(index: Int): T   // μΈν„°νμ΄μ¤ μ•μ—μ„ Tλ¥Ό μΌλ° νƒ€μ…μ²λΌ μ‚¬μ©ν•  μ μλ‹¤.
}
```

## 3) νƒ€μ… νλΌλ―Έν„° μ μ•½

- νƒ€μ… νλΌλ―Έν„° μ μ•½μ€ ν΄λμ¤λ‚ ν•¨μμ— μ‚¬μ©ν•  μ μλ” νƒ€μ… μΈμλ¥Ό μ ν•ν•λ” κΈ°λ¥μ΄λ‹¤.
- μ–΄λ–¤ νƒ€μ…μ„ μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… νλΌλ―Έν„°μ— λ€ν• μƒν•μΌλ΅ μ§€μ •ν•λ©΄ κ·Έ μ λ„¤λ¦­ νƒ€μ…μ„ μΈμ¤ν„΄μ¤ν™”ν•  λ• μ‚¬μ©ν•λ” νƒ€μ… μΈμλ” λ°λ“μ‹ κ·Έ μƒν• νƒ€μ…μ΄κ±°λ‚ κ·Έ μƒν• νƒ€μ…μ ν•μ„ νƒ€μ…μ΄μ–΄μ•Ό ν•λ‹¤.
    
    ```kotlin
    fun <T : Number> List<T>.sum(): T
    ```
    

**νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄ λ‘ μ΄μƒμ μ μ•½**

```kotlin
fun <T> ensureTrailingPeriod(seq: T)
    where T : CharSequence, T : Appendable {
    ...
}
```

- μ΄ μμ λ” νƒ€μ… μΈμκ°€ CharSequenceμ™€ Appendable μΈν„°νμ΄μ¤λ¥Ό λ°λ“μ‹ κµ¬ν„ν•΄μ•Ό ν•λ‹¤λ” μ‚¬μ‹¤μ„ ν‘ν„ν•λ‹¤.

## 4) νƒ€μ… νλΌλ―Έν„°λ¥Ό λ„μ΄ λ  μ μ—†λ” νƒ€μ…μΌλ΅ ν•μ •

- μ•„λ¬΄λ° μƒν•μ„ μ •ν•μ§€ μ•μ€ νƒ€μ… νλΌλ―Έν„°λ” κ²°κ³Όμ μΌλ΅ Any?λ¥Ό μƒν•μΌλ΅ μ •ν• νλΌλ―Έν„°μ™€ κ°™λ‹¤.
- λ„μ΄ λ  μ μ—†λ” νƒ€μ…μΌλ΅ ν•μ •ν•λ ¤λ©΄ μ•„λμ™€ κ°™μ΄ ν•λ©΄λλ‹¤. λ¬Όλ΅  λ‹¤λ¥Έ ν΄λμ¤λ¥Ό μ‚¬μ©ν•΄λ„ λλ‹¤.

```kotlin
class Processor<T : Any> {
		...
}
```

---

# 2οΈβƒ£Β μ‹¤ν–‰ μ‹ μ λ„¤λ¦­μ¤μ λ™μ‘: μ†κ±°λ νƒ€μ… νλΌλ―Έν„°μ™€ μ‹¤μ²΄ν™”λ νƒ€μ… νλΌλ―Έν„°

- JVMμ μ λ„¤λ¦­μ¤λ” λ³΄ν†µ νƒ€μ… μ†κ±°λ¥Ό μ‚¬μ©ν•΄ κµ¬ν„λλ‹¤.
    - μ΄λ” μ‹¤ν–‰ μ‹μ μ— μ λ„¤λ¦­ ν΄λμ¤μ μΈμ¤ν„΄μ¤μ— νƒ€μ… μΈμ μ •λ³΄κ°€ λ“¤μ–΄μμ§€ μ•λ‹¤λ” λ»μ΄λ‹¤.
    - μ½”ν‹€λ¦°μ—μ„λ” inlineμΌλ΅ λ§λ“¤λ©΄ νƒ€μ… μΈμκ°€ μ§€μ›μ§€μ§€ μ•κ² ν•  μ μλ‹¤. (μ‹¤μ²΄ν™”λΌκ³  λ¶€λ¥Έλ‹¤.)

## 1) μ‹¤ν–‰ μ‹μ μ μ λ„¤λ¦­: νƒ€μ… κ²€μ‚¬μ™€ μΊμ¤νΈ

- μλ°”μ™€ λ§μ°¬κ°€μ§€λ΅ μ½”ν‹€λ¦° μ λ„¤λ¦­ νƒ€μ… μΈμ μ •λ³΄λ” λ°νƒ€μ„μ— μ§€μ›μ§„λ‹¤(νƒ€μ… μ†κ±°). μ΄λ” μ λ„¤λ¦­ ν΄λμ¤ μΈμ¤ν„΄μ¤κ°€ κ·Έ μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν•  λ• μ“°μΈ νƒ€μ… μΈμμ— λ€ν• μ •λ³΄λ¥Ό μ μ§€ν•μ§€ μ•λ”λ‹¤λ” λ»μ΄λ‹¤.
- μλ¥Ό λ“¤μ–΄ LIst<String> κ°μ²΄λ¥Ό λ§λ“¤κ³  κ·Έ μ•μ— λ¬Έμμ—΄μ„ μ—¬λΏ λ„£λ”λΌλ„ μ‹¤ν–‰ μ‹μ μ—λ” κ·Έ κ°μ²΄λ¥Ό μ¤μ§ Listλ΅λ§ λ³Ό μ μλ‹¤. μ‹¤ν–‰ μ‹μ μ—λ” μ• μ μ—†λ‹¤.

```kotlin
val list1: List<String> = ...
val list2: List<Int> = ...
```

- μ»΄νμΌλ¬λ” λ‘ λ¦¬μ¤νΈλ¥Ό μ„λ΅ λ‹¤λ¥Έ νƒ€μ…μΌλ΅ μΈμ‹ν•λ‹¤.
- κ·Έλ¬λ‚ μ‹¤ν–‰ μ‹μ μ—λ” κ·Έ λ‘μ€ μ™„μ „ν κ°™μ€ νƒ€μ…(List)μ κ°μ²΄μ΄λ‹¤.
- κ·ΈλΌμ—λ„ λ¶κµ¬ν•κ³  λ³΄ν†µμ€ List<String>μ™€ List<Int>λ΅ κ°€μ •ν•  μ μλ”λ°, μ΄λ” μ»΄νμΌλ¬κ°€ νƒ€μ… μΈμλ¥Ό μ•κ³  μ¬λ°”λ¥Έ νƒ€μ…μ κ°’λ§ κ° λ¦¬μ¤νΈμ— λ„£λ„λ΅ λ³΄μ¥ν•΄μ£ΌκΈ° λ•λ¬Έμ΄λ‹¤.

**νƒ€μ… μ†κ±°λ΅ μΈν•΄ μƒκΈ°λ” ν•κ³„**

- νƒ€μ… μΈμλ¥Ό λ”°λ΅ μ €μ¥ν•μ§€ μ•κΈ° λ•λ¬Έμ— μ‹¤ν–‰ μ‹μ μ— νƒ€μ… μΈμλ¥Ό κ²€μ‚¬ν•  μ μ—†λ‹¤.
    - μΌλ°μ μΌλ΅ λ§ν•μλ©΄ is κ²€μ‚¬μ—μ„ νƒ€μ… μΈμλ΅ μ§€μ •ν• νƒ€μ…μ„ κ²€μ‚¬ν•  μ μ—†λ‹¤.
    
    ```kotlin
    if(value is List<String>) { ... }
    ERROR: Cannot check for instance of erased type
    ```
    

**νƒ€μ… μ†κ±°μ μ¥μ **

- μ €μ¥ν•΄μ•Ό ν•λ” νƒ€μ… μ •λ³΄μ ν¬κΈ°κ°€ μ¤„μ–΄λ“¤μ–΄μ„ μ „λ°μ μΈ λ©”λ¨λ¦¬ μ‚¬μ©λ‰μ΄ μ¤„μ–΄λ“ λ‹¤.

**μ¤νƒ€ ν”„λ΅μ μ…**

- μ½”ν‹€λ¦°μ—μ„λ” νƒ€μ… μΈμλ¥Ό λ…μ‹ν•μ§€ μ•κ³  μ λ„¤λ¦­ νƒ€μ…μ„ μ‚¬μ©ν•  μ μ—†λ”λ°, μ–΄λ–»κ² μ–΄λ–¤ κ°’μ΄ λ¦¬μ¤νΈλΌλ” μ‚¬μ‹¤μ„ ν™•μΈν•  μ μμ„κΉ?
- μ¤νƒ€ ν”„λ΅μ μ…(`*`)μ„ μ‚¬μ©ν•λ©΄ λλ‹¤.

```kotlin
if(value is List<*>) { ... }
```

- μ΄ λ…€μ„μ€ λ’¤μ—μ„ μμ„Έν λ‹¤λ£° κ²ƒμ΄λ‹¤.

**μ λ„¤λ¦­ νƒ€μ…μΌλ΅ νƒ€μ… μΊμ¤ν…ν•κΈ°**

```kotlin
fun printSum(c: Collection<*>) {
    val inList = c as? List<Int> ?: throw IllegalArgumentException()
    println(inList.sum())
}

printSum(listOf(1, 2, 4))   // μ •μƒ μ¶λ ¥
printSum(listOf("1", "2"))  // ClassCastException λ°μƒ
```

- asλ‚ as? μΊμ¤ν…μ—λ„ μ λ„¤λ¦­ νƒ€μ…μ„ μ‚¬μ©ν•  μ μλ‹¤.
    - μΊμ¤ν… κ΄€λ ¨ κ²½κ³ λ¥Ό ν•κ³  λ¬Έμ μ—†μ΄ μ»΄νμΌλλ‹¤.
- ν•μ§€λ§ μ‹¤ν–‰ μ‹μ μ—λ” μ λ„¤λ¦­ νƒ€μ…μ μΈμλ¥Ό μ• μ μ—†μΌλ―€λ΅ μΊμ¤ν…μ€ ν•­μƒ **μ„±κ³µ**ν•λ‹¤. λ”°λΌμ„ `IllegalArgumentException`μ€ λ°μƒν•μ§€ μ•λ”λ‹¤.
    - μ„ μ½”λ“ inList.sum() λ©”μ„λ“λ¥Ό μν–‰ν•λ©΄μ„ `ClassCastException`μ΄ λ°μƒν•λ‹¤.

**μ•λ ¤μ§„ νƒ€μ… μΈμλ¥Ό μ‚¬μ©ν•΄ νƒ€μ… κ²€μ‚¬ν•κΈ°**

```kotlin
fun printSum(c: Collection<Int>) {
    if(c is List<Int>) {
				println(inList.sum())
		}
}
```

- μ½”ν‹€λ¦° μ»΄νμΌλ¬λ” μ»΄νμΌ μ‹μ μ— νƒ€μ… μ •λ³΄κ°€ μ£Όμ–΄μ§„ κ²½μ°μ—λ” is κ²€μ‚¬λ¥Ό μν–‰ν•κ² ν—μ©ν•  μ μμ„ μ •λ„λ΅ λ‘λ‘ν•λ‹¤.

## 2) μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν• ν•¨μ μ„ μ–Έ

- μ½”ν‹€λ¦° μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… μΈμ μ •λ³΄λ” μ‹¤ν–‰ μ‹μ μ— μ§€μ›μ§„λ‹¤.
- μ λ„¤λ¦­ ν•¨μκ°€ νΈμ¶λλ„ κ·Έ ν•¨μμ λ³Έλ¬Έμ—μ„λ” νΈμ¶ μ‹ μ“°μΈ νƒ€μ… μΈμλ¥Ό μ• μ μ—†λ‹¤.
    
    ```kotlin
    fun <T> inA(value: Any) = value is T
    ERROR: Cannot check for instance of erased type
    ```
    

μ΄λ° μ μ•½μ„ ν”Όν•  μ μλ” κ²½μ°κ°€ ν•λ‚ μλ‹¤.

μΈλΌμΈ ν•¨μμ νƒ€μ… νλΌλ―Έν„°λ” μ‹¤μ²΄ν™”λλ―€λ΅ μ‹¤ν–‰ μ‹μ μ— μΈλΌμΈ ν•¨μμ νƒ€μ… μΈμλ¥Ό μ• μ μλ‹¤.

```kotlin
inline fun <reified T> isA(value: Any) = value is T

println(isA<String>("abc"))
```

- νƒ€μ… νλΌλ―Έν„°λ¥Ό reifiedλ΅ μ§€μ •ν•λ©΄ valueμ νƒ€μ…μ΄ Tμ μΈμ¤ν„΄μ¤μΈμ§€λ¥Ό μ‹¤ν–‰ μ‹μ μ— κ²€μ‚¬ν•  μ μλ‹¤.

<aside>
π’΅ **μΈλΌμΈ ν•¨μμ—μ„λ§ μ‹¤μ²΄ν™”λ νƒ€μ… μΈμλ¥Ό μ“Έ μ μλ” μ΄μ **
μ»΄νμΌλ¬λ” μΈλΌμΈ ν•¨μμ λ³Έλ¬Έμ„ κµ¬ν„ν• λ°”μ΄νΈμ½”λ“λ¥Ό κ·Έ ν•¨μκ°€ νΈμ¶λλ” λ¨λ“  μ§€μ μ— μ‚½μ…ν•λ‹¤. 
λ”°λΌμ„ μ»΄νμΌλ¬λ” μ‹¤μ²΄ν™”ν• νƒ€μ… μΈμλ¥Ό μ‚¬μ©ν•΄ μΈλΌμΈ ν•¨μλ¥Ό νΈμ¶ν•λ” κ° λ¶€λ¶„μ μ •ν™•ν• νƒ€μ… μΈμλ¥Ό μ• μ μλ‹¤. (κµ¬μ²΄μ μΈ ν΄λμ¤λ¥Ό μ°Έμ΅°ν•λ” λ°”μ΄νΈμ½”λ“λ¥Ό μƒμ„±ν•΄ μ‚½μ…ν•  μ μλ‹¤.)
μ΄λ¬ν• μ΄μ  λ•λ¬Έμ— reified νƒ€μ…μ„ μ‚¬μ©ν•λ” inline ν•¨μλ” μλ°” μ½”λ“μ—μ„ νΈμ¶ν•  μ μ—†λ‹¤.

</aside>

- μΈλΌμΈ ν•¨μλ¥Ό μ‚¬μ©ν•λ” μ΄μ  μ¤‘ ν•λ‚λ” μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•κΈ° μ„ν•¨μ΄λ‹¤.
- μΈλΌμΈ ν•¨μμ μ„±λ¥μ„ μΆ‹κ² ν•λ ¤λ©΄ ν¬κΈ°λ¥Ό κ³„μ† κ΄€μ°°ν•΄μ•Ό ν•λ‹¤. μ‹¤μ²΄ν™”ν• νƒ€μ…μ— μμ΅΄ν•μ§€ μ•λ” λ¶€λ¶„μ„ λ³„λ„μ μΌλ° ν•¨μλ΅ λ½‘μ•„λ‚΄λ” νΈμ΄ λ‚«λ‹¤.
- μΈλΌμ΄λ‹μ„ ν•κΈ° μ‹«μΌλ‚ μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•κ³  μ‹¶μΌλ©΄ nolilineμ„ μ‚¬μ©ν•μ.

## 3) μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°μ μ μ•½

- μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ” λ‡ κ°€μ§€ μ μ•½μ΄ μλ‹¤.

**μ‹¤μ²΄ν™”ν• νƒ€μ… νλ¦¬λ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μλ” κ²½μ°**

- νƒ€μ… κ²€μ‚¬μ™€ μΊμ¤ν…
- μ½”ν‹€λ¦° λ¦¬ν”λ ‰μ… API
- μ½”ν‹€λ¦° νƒ€μ…μ— λ€μ‘ν•λ” java.lang.Class μ–»κΈ°
- λ‹¤λ¥Έ ν•¨μλ¥Ό νΈμ¶ν•  λ• νƒ€μ… μΈμλ΅ μ‚¬μ©

**μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ΅ ν•  μ μ—†λ” μΌ**

- νƒ€μ… νλΌλ―Έν„° ν΄λμ¤μ μΈμ¤ν„΄μ¤ μƒμ„±ν•κΈ°
- νƒ€μ… νλΌλ―Έν„° ν΄λμ¤μ λ™λ° κ°μ²΄ λ©”μ„λ“ νΈμ¶ν•κΈ°
- μ‹¤μ²΄ν™”ν• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ”κµ¬ν•λ” ν•¨μλ¥Ό νΈμ¶ν•λ©΄μ„ μ‹¤μ²΄ν™”ν•μ§€ μ•μ€ νƒ€μ… νλΌλ―Έν„°λ΅ λ°›μ€ νƒ€μ…μ„ νƒ€μ… μΈμλ΅ λ„κΈ°κΈ°
- ν΄λμ¤, ν”„λ΅νΌν‹°, μΈλΌμΈ ν•¨μκ°€ μ•„λ‹ ν•¨μμ νƒ€μ… νλΌλ―Έν„°λ¥Ό reifiedλ΅ μ§€μ •ν•κΈ°

---

# 3οΈβƒ£Β λ³€μ„±: μ λ„¤λ¦­κ³Ό ν•μ„ νƒ€μ…

- λ³€μ„±μ κ°λ…μ€ List<String>κ³Ό List<Any>μ™€ κ°™μ΄ κΈ°μ € νƒ€μ…μ΄ κ°™κ³  νƒ€μ… μΈμκ°€ λ‹¤λ¥Έ μ—¬λ¬ νƒ€μ…μ΄ μ„λ΅ μ–΄λ–¤ κ΄€κ³„κ°€ μλ”μ§€ μ„¤λ…ν•λ” κ°λ…μ΄λ‹¤.
- λ³€μ„±μ„ μ ν™μ©ν•λ©΄ μ‚¬μ©μ— λ¶νΈν•μ§€ μ•μΌλ©΄μ„ νƒ€μ… μ•μ •μ„±μ„ λ³΄μ¥ν•λ” APIλ¥Ό λ§λ“¤ μ μλ‹¤.

## 1) λ³€μ„±μ΄ μλ” μ΄μ : μΈμλ¥Ό ν•¨μμ— λ„κΈ°κΈ°

- List<Any> νƒ€μ…μ νλΌλ―Έν„°λ¥Ό λ°›λ” ν•¨μμ— List<String>μ„ λ„κΈ°λ©΄ μ•μ „ν• κΉ?
- String ν΄λμ¤λ” Anyλ¥Ό ν™•μ¥ν•λ―€λ΅ λ„κ²¨λ„ μ•μ „ν•λ‹¤.
- κ·Έλ¬λ‚ Anyμ™€ Stringμ΄ List μΈν„°νμ΄μ¤ νƒ€μ… μΈμλ΅ λ“¤μ–΄κ°€λ” κ²½μ° μμ‹  μκ² μ•μ •μ„±μ„ λ§ν•  μ μ—†λ‹¤.
- μ΄ν•΄λ¥Ό λ•κΈ° μ„ν•΄ μμ λ¥Ό μ‚΄ν΄λ³΄μ
    
    ```kotlin
    public interface List<out E> : Collection<E> { .. }
    
    fun main() {
        val list1 = listOf("a", "b")
        printContents(list1)
    }
    
    fun printContents(list: List<Any>) {
        println(list.joinToString())
    }
    ```
    
    - μ΄ κ²½μ°λ” λ¬Έμμ—΄ λ¦¬μ¤νΈλ„ μ μ‘λ™ν•λ‹¤. λ¬Έμμ—΄μ€ Any νƒ€μ…μ΄κΈ°λ„ ν•λ―€λ΅ μ™„μ „ν μ•μ „ν•λ‹¤.
    
    ```kotlin
    fun main() {
        val list2 = mutableListOf("a", "b")
        addAnswer(list2)  // μ»΄νμΌ μ—λ¬ λ°μƒ
    }
    
    fun addAnswer(list: MutableList<Any>) {
        list.add(42)
    }
    ```
    
    - μ΄ κ²½μ°λ” μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•λ‹¤.
    - λ§μ•½ μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•μ§€ μ•λ”λ‹¤λ©΄ addAnswer() λ©”μ„λ“λ” μ •μλ¥Ό λ¦¬μ¤νΈ λ’¤μ— μ¶”κ°€ν•  μ μκ³ , λ°νƒ€μ„ μ‹μ μ— ClassCastExceptionμ΄ λ°μƒν•κ² λλ‹¤.
    - μ΄ μμ λ” MutableList<Any>κ°€ ν•„μ”ν• κ³³μ— MutableList<String>μ„ λ„κΈ°λ©΄ μ• λλ‹¤λ” μ‚¬μ‹¤μ„ λ³΄μ—¬μ¤€λ‹¤.
- μ •λ¦¬λ¥Ό ν•μλ©΄ μ–΄λ–¤ ν•¨μκ°€ λ¦¬μ¤νΈμ μ›μ†λ¥Ό μ¶”κ°€ν•κ±°λ‚ λ³€κ²½ν•λ‹¤λ©΄ νƒ€μ… λ¶μΌμΉκ°€ μƒκΈΈ μ μμ–΄μ„ List<Any> λ€μ‹  List<String>μ„ λ„κΈΈ μ μ—†λ‹¤. ν•μ§€λ§ μ›μ† μ¶”κ°€λ‚ λ³€κ²½μ΄ μ—†λ” κ²½μ°μ—λ” List<String>μ„ List<Any> λ€μ‹  λ„κ²¨λ„ μ•μ „ν•λ‹¤.
- μ½”ν‹€λ¦°μ—μ„λ” λ¦¬μ¤νΈμ λ³€κ²½ κ°€λ¥μ„±μ— λ”°λΌ μ μ ν• μΈν„°νμ΄μ¤λ¥Ό μ„ νƒν•λ©΄ μ•μ „ν•μ§€ λ»ν• ν•¨μ νΈμ¶μ„ λ§‰μ„ μ μλ‹¤.
- κ²°κµ­ μ΄λ° κ°λ…μ€ λ¨λ“  ν΄λμ¤μ— λ€ν•΄ μ μ©λλ‹¤.

## 2) ν΄λμ¤, νƒ€μ…, ν•μ„ νƒ€μ…

### **ν΄λμ¤μ™€ νƒ€μ…**

**ν΄λμ¤**

- μ λ„¤λ¦­ ν΄λμ¤κ°€ μ•„λ‹ ν΄λμ¤μ—μ„λ” ν΄λμ¤ μ΄λ¦„μ„ λ°”λ΅ νƒ€μ…μΌλ΅ μ“Έ μ μλ‹¤.
- `var x: String`μ΄λΌκ³  μ“°λ©΄ String ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό μ €μ¥ν•λ” λ³€μλ¥Ό μ •μν•  μ μλ‹¤.
- `var x: String?`μ²λΌ κ°™μ€ ν΄λμ¤ μ΄λ¦„μ„ λ„μ΄ λ  μ μλ” νƒ€μ…μ—λ„ μ“Έ μ μλ‹¤.
- μ΄λ” λ¨λ“  μ½”ν‹€λ¦° ν΄λμ¤κ°€ μ μ–΄λ„ λ‘ μ΄μƒμ νƒ€μ…μ„ κµ¬μ„±ν•  μ μλ‹¤λ” λ»μ΄λ‹¤.

**μ λ„¤λ¦­ ν΄λμ¤**

- μ¬λ°”λ¥Έ νƒ€μ…μ„ μ–»μΌλ ¤λ©΄ μ λ„¤λ¦­ νƒ€μ…μ νƒ€μ… νλΌλ―Έν„°λ¥Ό κµ¬μ²΄μ μΈ νƒ€μ… μΈμλ΅ λ°”κΏ”μ¤μ•Ό ν•λ‹¤.
- μλ¥Ό λ“¤μ–΄ Listλ” νƒ€μ…μ΄ μ•„λ‹λ‹¤.(ν΄λμ¤λ‹¤.)
- ν•μ§€λ§ νƒ€μ… μΈμλ¥Ό μΉν™ν• List<Int>, List<String> λ“±μ€ λ¨λ‘ μ λ€λ΅ λ νƒ€μ…μ΄λ‹¤.
- μ λ„¤λ¦­ ν΄λμ¤λ” λ¬΄μν λ§μ€ νƒ€μ…μ„ λ§λ“¤μ–΄ λ‚Ό μ μλ‹¤.

μ •λ¦¬ν•μλ©΄ ν΄λμ¤λ” μ μ–΄λ„ λ‘ μ΄μƒμ νƒ€μ…μ„ κµ¬μ„±ν•  μ μμΌλ―€λ΅ νƒ€μ…λ³΄λ‹¤ ν° μλ―ΈλΌκ³  μƒκ°ν•λ©΄ λλ‹¤.

### ν•μ„ νƒ€μ…

- μ–΄λ–¤ νƒ€μ… Aμ κ°’μ΄ ν•„μ”ν• λ¨λ“  μ¥μ†μ— μ–΄λ–¤ νƒ€μ… Bλ¥Ό λ„£μ–΄λ„ μ•„λ¬΄ λ¬Έμ κ°€ μ—†λ‹¤λ©΄ νƒ€μ… Bλ” νƒ€μ… Aμ ν•μ„ νƒ€μ…μ΄λ‹¤.
- μƒμ„ νƒ€μ…μ€ ν•μ„ νƒ€μ…μ λ°λ€λ‹¤.
- ν• νƒ€μ…μ΄ λ‹¤λ¥Έ νƒ€μ…μ ν•μ„ νƒ€μ…μΈμ§€κ°€ μ™ μ¤‘μ”ν• κΉ?
    - μ»΄νμΌλ¬λ” λ³€μ λ€μ…μ΄λ‚ ν•¨μ μΈμ μ „λ‹¬ μ‹ ν•μ„ νƒ€μ… κ²€μ‚¬λ¥Ό λ§¤λ² μν–‰ν•λ‹¤.
        
        ```kotlin
        fun test() {
        		val i = 1
        		val n: Number = i    // Intκ°€ Numberμ ν•μ„ νƒ€μ…μ΄μ—¬μ„ μ»΄νμΌλλ‹¤.
        		
        		fun f(s: String) { ... }
        		f(i)                 // Intκ°€ Stringμ ν•μ„ νƒ€μ…μ΄ μ•„λ‹μ–΄μ„ μ»΄νμΌλμ§€ μ•λ”λ‹¤.
        }
        ```
        
    - μ–΄λ–¤ κ°’μ νƒ€μ…μ΄ λ³€μ νƒ€μ…μ ν•μ„ νƒ€μ…μΈ κ²½μ°μ—λ§ κ°’μ„ λ³€μμ— λ€μ…ν•κ² ν—μ©ν•λ‹¤.
    - μ΄ μμ μ—μ„ λ³€μλ¥Ό μ΄κΈ°ν™”ν• iμ Intλ΅ λ³€μμ νƒ€μ…μΈ Numberμ ν•μ„ νƒ€μ…μ΄λ‹¤.
- κ°„λ‹¨ν• κ²½μ° ν•μ„ νƒ€μ…μ€ ν•μ„ ν΄λμ¤μ™€ κ·Όλ³Έμ μΌλ΅ κ°™λ‹¤.
    - μλ¥Ό λ“¤μ–΄ Int ν΄λμ¤λ” Numberμ ν•μ„ ν΄λμ¤μΈ κ²ƒμ²λΌ ν•μ„ νƒ€μ…μ΄κΈ°λ„ ν•λ‹¤.
- λ‹¤λ§ λ„μ΄ λ  μ μλ” νƒ€μ…μ€ ν•μ„ νƒ€μ…κ³Ό ν•μ„ ν΄λμ¤κ°€ κ°™μ§€ μ•λ‹¤.
    - λ„μ΄ λ  μ μ—†λ” νƒ€μ…μ€ λ„μ΄ λ  μ μλ” νƒ€μ…μ ν•μ„ νƒ€μ…μ΄λ‹¤.
        
        ```kotlin
        val s: String = "abc"
        val t: String? = s // Stringμ€ String?μ ν•μ„ νƒ€μ…μ΄λ―€λ΅ λ€μ…μ΄ κ°€λ¥ν•λ‹¤.
        s = t // String?μ΄ μƒμ„ νƒ€μ…μ΄λ―€λ΅ λ€μ…μ΄ λ¶κ°€λ¥ν•λ‹¤.
        ```
        
    - ν•μ§€λ§ λ‘ νƒ€μ… λ¨λ‘ κ°™μ€ ν΄λμ¤μ— ν•΄λ‹Ήν•λ‹¤.
- μ λ„¤λ¦­ νƒ€μ…μ—  λ€ν•΄ μ΄μ•ΌκΈ°ν•  λ• νΉν ν•μ„ ν΄λμ¤μ™€ ν•μ„ νƒ€μ…μ μ°¨μ΄κ°€ μ¤‘μ”ν•΄μ§„λ‹¤.
    - μ•μ—μ„ μ‚΄ν΄λ³Έ **`List<String> νƒ€μ…μ κ°’μ„ List<Any>λ¥Ό νλΌλ―Έν„°λ΅ λ°›λ” ν•¨μμ— μ „λ‹¬ν•΄λ„ κ΄μ°®μ€κ°€?`** λΌλ” μ§λ¬Έμ„ ν•μ„ νƒ€μ… κ΄€κ³„λ¥Ό μ¨μ„ λ‹¤μ‹ μ“°λ©΄ **`List<String>μ€ List<Any>μ ν•μ„ νƒ€μ…μΈκ°€?`**λ‹¤.
    - MutableList<String>μ€ MutableList<Any>μ ν•μ„ νƒ€μ…μ΄ μ•„λ‹λ‹¤. κ·Έ λ°λ€λ„ μ°Έμ΄ μ•„λ‹λ‹¤.

### λ¬΄κ³µλ³€

- μ λ„¤λ¦­ νƒ€μ…μ„ μΈμ¤ν„΄μ¤ν™”ν•  λ• νƒ€μ… μΈμλ΅ μ„λ΅ λ‹¤λ¥Έ νƒ€μ…μ΄ λ“¤μ–΄κ°€λ©΄, μΈμ¤ν„΄μ¤ νƒ€μ… μ‚¬μ΄μ ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ„±λ¦½ν•μ§€ μ•λ”λ° κ·Έ μ λ„¤λ¦­ νƒ€μ…μ„ **λ¬΄κ³µλ³€**μ΄λΌκ³  ν•λ‹¤.
    - MutableListλ¥Ό μλ¥Ό λ“¤λ©΄ Aμ™€ Bκ°€ μ„λ΅ λ‹¤λ¥΄κΈ°λ§ ν•λ©΄ MutableList<A>λ” MutableList<B>μ ν•μ„ νƒ€μ…μ΄ μ•„λ‹λ‹¤.
    - μλ°”μ—μ„λ” λ¨λ“  ν΄λμ¤κ°€ λ¬΄κ³µλ³€μ΄λ‹¤. μ΄κ±΄ μ μ‹ λ’¤μ— μμ„Έν μ•μ•„λ³΄μ.

## 3) κ³µλ³€μ„±: ν•μ„ νƒ€μ… κ΄€κ³„λ¥Ό μ μ§€

Producer<T>λ¥Ό μλ΅ κ³µλ³€μ„± ν΄λμ¤λ¥Ό μ„¤λ…ν•μ. Aκ°€ Bμ ν•μ„ νƒ€μ…μΌ λ• Producer<A>κ°€ Producer<B>μ ν•μ„ νƒ€μ…μ΄λ©΄ Producerλ” κ³µλ³€μ μ΄λ‹¤. μ΄λ¥Ό ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ μ§€λλ‹¤κ³  λ§ν•λ‹¤.

μ½”ν‹€λ¦°μ—μ„ μ λ„¤λ¦­ ν΄λΌμ¤κ°€ νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄ κ³µλ³€μ μ„μ„ ν‘μ‹ν•λ ¤λ©΄ νƒ€μ… νλΌλ―Έν„° μ΄λ¦„ μ•μ— outμ„ λ„£μ–΄μ•Ό ν•λ‹¤. (μ°Έκ³ λ΅ μ„μ—μ„ μ„¤λ…ν• List μΈν„°νμ΄μ¤λ„ outμ΄ λ¶™μ–΄μλ‹¤.)

```kotlin
interface Producer<out T> { ... }
```

ν΄λμ¤μ νƒ€μ… νλΌλ―Έν„°λ¥Ό κ³µλ³€μ μΌλ΅ λ§λ“¤λ©΄ ν•¨μ μ •μμ— μ‚¬μ©ν• νλΌλ―Έν„° νƒ€μ…κ³Ό νƒ€μ… μΈμμ νƒ€μ…μ΄ μ •ν™•ν μΌμΉν•μ§€ μ•λ”λΌλ„ κ·Έ ν΄λμ¤μ μΈμ¤ν„΄μ¤λ¥Ό ν•¨μ μΈμλ‚ λ°ν™ κ°’μΌλ΅ μ‚¬μ©ν•  μ μλ‹¤.

κ°„λ‹¨ν• μμ λ¥Ό μ‚΄ν΄λ³΄μ.

```kotlin
open class Animal {
    fun feed() { ... }
}

class Herd<T : Animal> {
    operator fun get(i: Int): T { ... }
}

fun feedAll(animals: Herd<Animal>) { ... }
```

- Herd ν΄λμ¤λ΅ ν‘ν„λλ” λ™λ¬Ό λ¬΄λ¦¬μ μ‚¬μ΅μ„ λ‹΄λ‹Ήν•λ” ν•¨μκ°€ μλ‹¤κ³  κ°€μ •ν•λ‹¤.
- Herd ν΄λμ¤μ νƒ€μ… νλΌλ―Έν„°λ” κ·Έ λ–Όκ°€ μ–΄λ–¤ λ™λ¬Ό λ¬΄λ¦¬μΈμ§€ μ•λ ¤μ¤€λ‹¤.

```kotlin
class Cat : Animal() {
    fun cleanLitter() { ... }
}

fun takeCareOfCats(cats: Herd<Cat>) {
    for (i in 0 until cats.size) {
				cats[i].cleanLitter()
		    feedAll(cats) // Type mismatch λΌλ” μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•λ‹¤.
		}
}
```

feedAll() λ©”μ„λ“μ—μ„ μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•λ” μ΄μ λ” Catμ€ AnimalHerd<Cat>μ€ Herd<Animal>μ ν•μ„ νƒ€μ…μ΄ μ•„λ‹κΈ° λ•λ¬Έμ΄λ‹¤. νƒ€μ… μΊμ¤ν…μ„ μ‚¬μ©ν•λ©΄ μ΄ λ¬Έμ λ¥Ό ν’€ μ μμ§€λ§ κ°•μ  μΊμ¤ν…, μ‹¤μ μ λ°, μ½”λ“ μ¥ν™© λ“±μ λ¬Έμ μ μ΄ λ°μƒν•κΈ° λ•λ¬Έμ— μ¬λ°”λ¥Έ λ°©λ²•μ΄ μ•„λ‹λ‹¤.

κ°€μ¥ μΆ‹μ€ ν•΄κ²°λ°©λ²•μ€ Herdλ¥Ό κ³µλ³€μ μΈ ν΄λμ¤λ΅ λ§λ“λ” κ²ƒμ΄λ‹¤.

```kotlin
class Herd<out T : Animal> { ... }
```

ν΄λμ¤ λ©¤λ²„λ¥Ό μ„ μ–Έν•  λ• νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•  μ μλ” μ§€μ μ€ λ¨λ‘ μΈκ³Ό μ•„μ›ƒ μ„μΉλ΅ λ‚λ‰λ‹¤. TλΌλ” νƒ€μ… νλΌλ―Έν„°λ¥Ό μ„ μ–Έν•κ³  Tλ¥Ό μ‚¬μ©ν•λ” ν•¨μκ°€ λ©¤λ²„λ΅ μλ” ν΄λμ¤λ¥Ό μƒκ°ν•΄λ³΄μ.

```kotlin
interface Transformer<T> {
		fun transform(t: T): T
						 /*μΈ μ„μΉ*//*μ•„μ›ƒ μ„μΉ*/
}
```

- ν΄λμ¤ νƒ€μ… νλΌλ―Έν„° T μ•μ— out ν‚¤μ›λ“λ¥Ό λ¶™μ΄λ©΄ ν΄λμ¤ μ•μ—μ„ Tλ¥Ό μ‚¬μ©ν•λ” λ©”μ„λ“κ°€ μ•„μ›ƒ μ„μΉμ—μ„λ§ Tλ¥Ό μ‚¬μ©ν•κ² ν—μ©ν•κ³  μΈ μ„μΉμ—μ„λ” Tλ¥Ό μ‚¬μ©ν•μ§€ λ»ν•κ² λ§‰λ”λ‹¤.
    - μ΄λ” ν΄λμ¤κ°€ T νƒ€μ…μ κ°’μ„ μƒμ‚°ν•  μλ” μμ§€λ§ T νƒ€μ…μ κ°’μ„ μ†λΉ„ν•  μλ” μ—†λ‹¤λ” λ»μ΄λ‹¤.
    - out ν‚¤μ›λ“λ” Tμ μ‚¬μ©λ²•μ„ μ ν•ν•λ©° Tλ΅ μΈν•΄ μƒκΈ°λ” ν•μ„ νƒ€μ… κ΄€κ³„μ νƒ€μ… μ•μ •μ„±μ„ λ³΄μ¥ν•λ‹¤.

μλ¥Ό λ“¤μ–΄ Herd ν΄λμ¤λ¥Ό μƒκ°ν•΄λ³΄μ. 

```kotlin
class Herd<T : Animal> {
    operator fun get(i: Int): T { ... }
}
```

- Herdμ—μ„ νƒ€μ… νλΌλ―Έν„° Tλ¥Ό μ‚¬μ©ν•λ” μ¥μ†λ” μ¤μ§ get λ©”μ„λ“μ λ°ν™ νƒ€μ…λΏμ΄λ‹¤.
- λ”°λΌμ„ μ΄ ν΄λμ¤λ¥Ό κ³µλ³€μ μΌλ΅ μ„ μ–Έν•΄λ„ μ•μ „ν•λ‹¤.
- Catμ΄ Animalμ ν•μ„ νƒ€μ…μ΄κΈ° λ•λ¬Έμ— Herd<Animal>μ getμ„ νΈμ¶ν•λ” λ¨λ“  μ½”λ“λ” getμ΄ Catμ„ λ°ν™ν•΄λ„ μ•„λ¬΄ λ¬Έμ μ—†μ΄ μ‘λ™ν•λ‹¤.

μ •λ¦¬ν•μλ©΄, νƒ€μ… νλΌλ―Έν„° Tμ— λ¶™μ€ out ν‚¤μ›λ“λ” λ‹¤μ λ‘ κ°€μ§€λ¥Ό ν•¨κ» μλ―Έν•λ‹¤.

- **κ³µλ³€μ„±**: ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ μ§€λλ‹¤. (Producer<Cat>μ€ Producer<Animal>μ ν•μ„ νƒ€μ…μ΄λ‹¤).
- **μ‚¬μ© μ ν•**: Tλ¥Ό μ•„μ›ƒ μ„μΉμ—μ„λ§ μ‚¬μ©ν•  μ μλ‹¤.

μ΄μ  List<T> μΈν„°νμ΄μ¤λ¥Ό λ³΄μ. 

```kotlin
public interface List<out E> : Collection<E> {
    public operator fun get(index: Int): E\
		...
}
```

μ½”ν‹€λ¦° Listλ” μ½κΈ° μ „μ©μ΄λ‹¤. λ”°λΌμ„ κ·Έ μ•μ—λ” T νƒ€μ…μ μ›μ†λ¥Ό λ°ν™ν•λ” get λ©”μ„λ“λ” μμ§€λ§ λ¦¬μ¤νΈμ— T νƒ€μ…μ κ°’μ„ μ¶”κ°€ν•κ±°λ‚ λ¦¬μ¤νΈμ— μλ” κΈ°μ΅΄ κ°’μ„ λ³€κ²½ν•λ” λ©”μ„λ“λ” μ—†λ‹¤. λ”°λΌμ„ Listλ” Tμ— λ€ν•΄ **κ³µλ³€μ **μ΄λ‹¤.

μ΄μ   MutableList<T> μΈν„°νμ΄μ¤λ¥Ό λ³΄μ.

```kotlin
public interface MutableList<E> : List<E>, MutableCollection<E> {
    override fun add(element: E): Boolean
		...
}
```

MutableList<T>μ—λ” Tλ¥Ό μΈμλ΅ λ°›μ•„μ„ κ·Έ νƒ€μ…μ κ°’μ„ λ°ν™ν•λ” λ©”μ„λ“κ°€ μλ‹¤. λ”°λΌμ„ νƒ€μ… νλΌλ―Έν„° Tμ— λ€ν•΄ κ³µλ³€μ μΈ ν΄λμ¤λ΅ μ„ μ–Έν•  μλ” μ—†λ‹¤. κ·Έ μ΄μ λ” μ„μ—μ„ μ„¤λ…ν–λ‹¤.

μ°Έκ³ λ΅ μƒμ„±μ νλΌλ―Έν„°λ” μΈμ΄λ‚ μ•„μ›ƒ μ–΄λ μ½λ„ μ•„λ‹λΌλ” μ‚¬μ‹¤μ— μ μν•μ.

- μƒμ„±μλ” μΈμ¤ν„΄μ¤λ¥Ό μƒμ„±ν• λ’¤ νΈμ¶ν•  μ μλ” λ©”μ„λ“κ°€ μ•„λ‹λ‹¤. λ”°λΌμ„ μ„ν—ν•  μ—¬μ§€κ°€ μ—†λ‹¤.
- ν•μ§€λ§ val μ΄λ‚ var ν‚¤μ›λ“λ¥Ό μƒμ„±μ νλΌλ―Έν„°μ— μ λ”λ‹¤λ©΄ getterλ‚ setterλ¥Ό μ •μν•λ” κ²ƒκ³Ό κ°™λ‹¤. λ”°λΌμ„ μ½κΈ° μ „μ© ν”„λ΅νΌν‹°(val)μ€ μ•„μ›ƒ μ„μΉ, λ³€κ²½ κ°€λ¥ ν”„λ΅νΌν‹°(var)μ€ μ•„μ›ƒκ³Ό μΈ μ„μΉ λ¨λ‘μ— ν•΄λ‹Ήν•λ‹¤.
    
    ```kotlin
    class Herd<out T : Animal>(
        val leadAnimal: T, // getter λ” μ•„μ›ƒ μ„μΉμ— ν•΄λ‹Ήν•λ―€λ΅ κ°€λ¥ν•λ‹¤.
        var leadAnimal: T  // setter λ” μΈ μ„μΉμ— ν•΄λ‹Ήν•λ―€λ΅ μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•λ‹¤.
    )
    ```
    

## 4) λ°κ³µλ³€μ„±: λ’¤μ§‘ν ν•μ„ νƒ€μ… κ΄€κ³„

λ°κ³µλ³€μ„± ν΄λμ¤μ ν•μ„ νƒ€μ… κ΄€κ³„λ” κ³µλ³€ ν΄λμ¤μ κ²½μ°μ™€ λ°λ€λ‹¤.

Comsumer<T>λ¥Ό μλ΅ λ“¤μ–΄ μ„¤λ…ν•μ.

νƒ€μ… Bκ°€ νƒ€μ… Aμ ν•μ„ νƒ€μ…μΈ κ²½μ° Consumer<A>κ°€ Consumer<B>μ ν•μ„ νƒ€μ…μΈ κ΄€κ³„κ°€ μ„±λ¦½ν•λ©΄ μ λ„¤λ¦­ ν΄λμ¤ Consumer<T>λ” νƒ€μ… μΈμ Tμ— λ€ν•΄ **λ°κ³µλ³€**μ΄λ‹¤. κ³µλ³€μ ν•μ„ νƒ€μ… κ΄€κ³„μ™€λ” λ°λ€λΌλ” μ μ„ ν™•μΈν•  μ μλ‹¤.

inμ΄λΌλ” ν‚¤μ›λ“λ” κ·Έ ν‚¤μ›λ“κ°€ λ¶™μ€ νƒ€μ…μ΄ μ΄ ν΄λμ¤μ λ©”μ„λ“ μ•(in μ„μΉ)μΌλ΅ μ „λ‹¬λΌ λ©”μ„λ“μ— μν•΄ μ†λΉ„λλ‹¤λ” λ»μ΄λ‹¤. κ³µλ³€μ„±κ³Ό λ§μ°¬κ°€μ§€λ΅ νƒ€μ… νλΌλ―Έν„°μ μ‚¬μ©μ„ μ ν•ν•¨μΌλ΅μ¨ νΉμ • ν•μ„ νƒ€μ… κ΄€κ³„μ— λ„λ‹¬ν•  μ μλ‹¤.

| κ³µλ³€μ„± | λ°κ³µλ³€μ„± | λ¬΄κ³µλ³€μ„± |
| --- | --- | --- |
| Producer<out T> | Consumer<in T> | MutableList<T> |
| νƒ€μ… μΈμμ ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ λ„¤λ¦­ νƒ€μ…μ—μ„λ„ μ μ§€λλ‹¤. | νƒ€μ… μΈμμ ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ λ„¤λ¦­ νƒ€μ…μ—μ„ λ’¤μ§‘νλ‹¤. | ν•μ„ νƒ€μ… κ΄€κ³„κ°€ μ„±λ¦½ν•μ§€ μ•λ”λ‹¤. |
| Producer<Cat>μ€ Producer<Animal>μ ν•μ„ νƒ€μ…μ΄λ‹¤. | Consumer<Animal>μ€ Consumer<Cat>μ ν•μ„ νƒ€μ…μ΄λ‹¤. |  |
| Tλ¥Ό μ•„μ›ƒ μ„μΉμ—μ„λ§ μ‚¬μ©ν•  μ μλ‹¤. | Tλ¥Ό μΈ μ„μΉμ—μ„λ§ μ‚¬μ©ν•  μ μλ‹¤. | Tλ¥Ό μ•„λ¬΄ μ„μΉμ—μ„λ‚ μ‚¬μ©ν•  μ μλ‹¤. |

ν΄λμ¤λ‚ μΈν„°νμ΄μ¤κ°€ μ–΄λ–¤ νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄μ„λ” κ³µλ³€μ μ΄λ©΄μ„ λ‹¤λ¥Έ νƒ€μ… νλΌλ―Έν„°μ— λ€ν•΄μ„λ” λ°κ³µλ³€μ μΌ μλ„ μλ‹¤. Function μΈν„°νμ΄μ¤κ°€ κ³ μ „μ μΈ μλ‹¤.

```kotlin
interface Function(in P, out R) {
		operator fun invoke(p: P): R
}
```

- Pμ™€ Rμ— κ°κ° inκ³Ό out ν‘μ‹κ°€ λ¶™μ–΄ μμμ„ λ³Ό μ μλ‹¤.
- μ΄λ” μ²« λ²μ§Έ νƒ€μ… μΈμμ ν•μ„ νƒ€μ… κ΄€κ³„μ™€λ” μ •λ°λ€μ§€λ§, λ‘ λ²μ§Έ νƒ€μ… μΈμλ” ν•μ„ νƒ€μ… κ΄€κ³„μ™€ κ°™μμ„ λ»ν•λ‹¤.

## 5) μ‚¬μ© μ§€μ  λ³€μ„±: νƒ€μ…μ΄ μ–ΈκΈ‰λλ” μ§€μ μ—μ„ λ³€μ„± μ§€μ •

- μ½”ν‹€λ¦°μ€ ν΄λμ¤λ¥Ό μ„ μ–Έν•λ©΄μ„ λ³€μ„±μ„ μ§€μ •ν•λ©΄ κ·Έ ν΄λμ¤λ¥Ό μ‚¬μ©ν•λ” λ¨λ“  μ¥μ†μ— λ³€μ„± μ§€μ •μκ°€ μν–¥μ„ λΌμΉλ―€λ΅ νΈλ¦¬ν•λ‹¤. μ΄λ° λ°©μ‹μ„ **μ„ μ–Έ μ§€μ  λ³€μ„±**μ΄λΌ λ¶€λ¥Έλ‹¤.
- μλ°”μ μ™€μΌλ“μΉ΄λ“ νƒ€μ…(? extendsλ‚ ? super)μ— μµμ™ν•λ‹¤λ©΄ μλ°”λ” λ³€μ„±μ„ λ‹¤λ¥Έ λ°©μ‹μΌλ΅ λ‹¤λ£¬λ‹¤λ” μ μ„ κΉ¨λ‹¬μ•μ„ κ²ƒμ΄λ‹¤. μλ°”μ—μ„λ” νƒ€μ… νλΌλ―Έν„°κ°€ μλ” νƒ€μ…μ„ μ‚¬μ©ν•  λ•λ§λ‹¤ ν•΄λ‹Ή νƒ€μ… νλΌλ―Έν„°λ¥Ό ν•μ„ νƒ€μ…μ΄λ‚ μƒμ„ νƒ€μ… μ¤‘ μ–΄λ–¤ νƒ€μ…μΌλ΅ λ€μΉν•  μ μλ”μ§€ λ…μ‹ν•΄μ•Ό ν•λ‹¤. μ΄λ° λ°©μ‹μ„ **μ‚¬μ© μ§€μ  λ³€μ„±**μ΄λΌ λ¶€λ¥Έλ‹¤.

<aside>
π’΅ **μ½”ν‹€λ¦° μ„ μ–Έ μ§€μ  λ³€μ„±κ³Ό μλ°” μ™€μΌλ“μΉ΄λ“ λΉ„κµ**
μ„ μ–Έ μ§€μ  λ³€μ„±μ„ μ‚¬μ©ν•λ©΄ λ³€μ„± λ³€κ²½μλ¥Ό λ‹¨ ν• λ²λ§ ν‘μ‹ν•κ³  ν΄λμ¤λ¥Ό μ“°λ” μ½μ—μ„λ” λ³€μ„±μ— λ€ν•΄ μ‹ κ²½μ„ μ“Έ ν•„μ”κ°€ μ—†μΌλ―€λ΅ μ½”λ“κ°€ λ” κ°„κ²°ν•΄μ§„λ‹¤.

</aside>

μ½”ν‹€λ¦°λ„ μ‚¬μ© μ§€μ  λ³€μ„±μ„ μ§€μ›ν•λ‹¤. λ”°λΌμ„ ν΄λμ¤ μ•μ—μ„ μ–΄λ–¤ νƒ€μ… νλΌλ―Έν„°κ°€ κ³µλ³€μ μ΄κ±°λ‚ λ°κ³µλ³€μ μΈμ§€ μ„ μ–Έν•  μ μ—†λ” κ²½μ°μ—λ„ νΉμ • νƒ€μ… νλΌλ―Έν„°κ°€ λ‚νƒ€λ‚λ” μ§€μ μ—μ„ λ³€μ„±μ„ μ •ν•  μ μλ‹¤.

μ‚¬μ© μμ λ¥Ό μ‚΄ν΄λ³΄μ.

**λ¬΄κ³µλ³€ νλΌλ―Έν„° νƒ€μ…μ„ μ‚¬μ©ν•λ” λ°μ΄ν„° λ³µμ‚¬ ν•¨μ**

```kotlin
fun <T> copyData(source: MutableList<T>, destination: MutableList<T>) {
    for(item in source) {
        destination.add(item)
    }
}
```

- μ΄ ν•¨μλ” μ»¬λ ‰μ…μ μ›μ†λ¥Ό λ‹¤λ¥Έ μ»¬λ ‰μ…μΌλ΅ λ³µμ‚¬ν•λ‹¤.
- λ‘ μ»¬λ ‰μ… λ¨λ‘ λ¬΄κ³µλ³€ νƒ€μ…μ΄μ§€λ§ μ›λ³Έ μ»¬λ ‰μ…μ—μ„λ” μ½κΈ°λ§ ν•κ³  λ€μƒ μ»¬λ ‰μ…μ—λ” μ“°κΈ°λ§ ν•λ‹¤.
- μ΄ κ²½μ° λ‘ μ»¬λ ‰μ…μ μ›μ† νƒ€μ…μ΄ μ •ν™•ν•κ² μΌμΉν•  ν•„μ”κ°€ μ—†λ‹¤.
- μλ¥Ό λ“¤μ–΄ λ¬Έμμ—΄μ΄ μ›μ†μΈ μ»¬λ ‰μ…μ—μ„ κ°μ²΄μ μ»¬λ ‰μ…μΌλ΅ μ›μ†λ¥Ό λ³µμ‚¬ν•΄λ„ μ•„λ¬΄ λ¬Έμ κ°€ μ—†λ‹¤.
- μ΄ μ½”λ“λ” λ™μ‘ν•μ§€ μ•λ”λ‹¤. λ‘ λ¦¬μ¤νΈμ νƒ€μ…μ΄ μ™„μ „ λ™μΌν•μ§€ μ•μΌλ©΄ μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•λ‹¤.

**νƒ€μ… νλΌλ―Έν„°κ°€ λ‘μΈ λ°μ΄ν„° λ³µμ‚¬ ν•¨μ**

```kotlin
fun <T: R, R> copyData(
				// source μ›μ† νƒ€μ…μ€ destination μ›μ† νƒ€μ…μ ν•μ„ νƒ€μ…μ΄μ–΄μ•Ό ν•λ‹¤.
				source: MutableList<T>,
				destination: MutableList<R> ) {
    for(item in source) {
        destination.add(item)
    }
}

val s = mutableListOf<Int>()
val d = mutableListOf<Any>()
copyData(s, d)
```

- μ΄ ν•¨μλ” μ—¬λ¬ λ‹¤λ¥Έ λ¦¬μ¤νΈ νƒ€μ…μ— λ€ν•΄ μ‘λ™ν•κ² ν•  μ μλ‹¤.
- ν• λ¦¬μ¤νΈμ—μ„ λ‹¤λ¥Έ λ¦¬μ¤νΈλ΅ μ›μ†λ¥Ό λ³µμ‚¬ν•  μ μμΌλ ¤λ©΄ μ›λ³Έ λ¦¬μ¤νΈ μ›μ† νƒ€μ…μ€ λ€μƒ λ¦¬μ¤νΈ μ›μ† νƒ€μ…μ ν•μ„ νƒ€μ…μ΄μ–΄μ•Ό ν•λ‹¤.
- Intλ” Anyμ ν•μ„ νƒ€μ…μ΄κΈ° λ•λ¬Έμ— μ„ μ½”λ“λ” μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•μ§€ μ•λ”λ‹¤.

**μ•„μ›ƒ-ν”„λ΅μ μ… νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” λ°μ΄ν„° λ³µμ‚¬ ν•¨μ**

```kotlin
fun <T> copyData(source: MutableList<out T>, destination: MutableList<T>) {
    for(item in source) {
        destination.add(item)
    }
}
```

- μ„μ²λΌ νƒ€μ… μ„ μ–Έμ—μ„ νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” μ„μΉλΌλ©΄ μ–΄λ””μ—λ‚ λ³€μ„± λ³€κ²½μλ¥Ό λ¶™μΌ μ μλ‹¤.
- λ”°λΌμ„ νλΌλ―Έν„° νƒ€μ…, λ΅μ»¬ λ³€μ νƒ€μ…, ν•¨μ λ°ν™ νƒ€μ… λ“±μ— νƒ€μ… νλΌλ―Έν„°κ°€ μ“°μ΄λ” κ²½μ° inμ΄λ‚ out λ³€κ²½μλ¥Ό λ¶™μΌ μ μλ‹¤.
- μ΄λ• νƒ€μ… ν”„λ΅μ μ…μ΄ μΌμ–΄λ‚λ‹¤.
- μ΄ κ²½μ° MutableListμ λ©”μ„λ“ μ¤‘μ—μ„ λ°ν™ νƒ€μ…μΌλ΅ νƒ€μ… νλΌλ―Έν„°  Tλ¥Ό μ‚¬μ©ν•λ” λ©”μ„λ“λ§ νΈμ¶ν•  μ μλ‹¤. (λ” μ •ν™•ν•κ²λ” νƒ€μ… νλΌλ―Έν„° Tλ¥Ό μ•„μ›ƒ μ„μΉμ—μ„ μ‚¬μ©ν•λ” λ©”μ„λ“λ§ νΈμ¶ν•  μ μλ‹¤.)
- μ»΄νμΌλ¬λ” νƒ€μ… νλΌλ―Έν„° Tλ¥Ό ν•¨μ μΈμ νƒ€μ…(μ •ν™•ν•κ²λ” μΈ μ„μΉμ— μλ” νƒ€μ…)λ΅ μ‚¬μ©ν•μ§€ λ»ν•κ² λ§‰λ”λ‹¤.
- **outμ„ λ¶™μ΄λ©΄ κ·Έ νλΌλ―Έν„°λ¥Ό λ” ν•μ„ νƒ€μ…μΌλ΅ λ€μΉν•  μ μλ‹¤.**
    
    ```kotlin
    val list: MutableList<out Number>
    list.add(1)   // μ»΄νμΌ μ—λ¬ λ°μƒ
    ```
    

**μΈ-ν”„λ΅μ μ… νƒ€μ… νλΌλ―Έν„°λ¥Ό μ‚¬μ©ν•λ” λ°μ΄ν„° λ³µμ‚¬ ν•¨μ**

```kotlin
fun <T> copyData(source: MutableList<T>, destination: MutableList<in T>) {
    for(item in source) {
        destination.add(item)
    }
}
```

- **inμ„ λ¶™μ΄λ©΄ κ·Έ νλΌλ―Έν„°λ¥Ό λ” μƒμ„ νƒ€μ…μΌλ΅ λ€μΉν•  μ μλ‹¤.**

## 6) μ¤νƒ€ ν”„λ΅μ μ…: νƒ€μ… μΈμ λ€μ‹  * μ‚¬μ©

μ¤νƒ€ ν”„λ΅μ μ…μ€ μ λ„¤λ¦­ νƒ€μ… μΈμ μ •λ³΄κ°€ μ—†μμ„ ν‘ν„ν•κΈ° μ„ν•΄ μ‚¬μ©ν•λ‹¤.

MutableList<*>λ” MutableList<Any?>μ™€ κ°™μ§€ μ•λ‹¤.

MutableList<Any?>λ” λ¨λ“  νƒ€μ…μ μ›μ†λ¥Ό λ‹΄μ„ μ μλ‹¤λ” μ‚¬μ‹¤μ„ μ• μ μλ” λ¦¬μ¤νΈλ‹¤. λ°λ©΄ MutableList<*>λ” μ–΄λ–¤ μ •ν•΄μ§„ κµ¬μ²΄μ μΈ νƒ€μ…μ μ›μ†λ§μ„ λ¦¬μ¤νΈμ§€λ§ κ·Έ μ›μ†μ νƒ€μ…μ„ μ •ν™•ν λ¨λ¥Έλ‹¤λ” μ‚¬μ‹¤μ„ ν‘ν„ν•κΈ° λ•λ¬Έμ΄λ‹¤.

```kotlin
val unknownElement: MutableList<*> = mutableListOf<Int>()
unknownElement.add(1) // μ»΄νμΌ μ—λ¬ λ°μƒ
```

- μ„ μ½”λ“λ” μ»΄νμΌ μ—λ¬κ°€ λ°μƒν•λ‹¤.
- μ»΄νμΌλ¬λ” MutableList<*>λ¥Ό μ•„μ›ƒ ν”„λ΅μ μ… νƒ€μ…μΌλ΅ μΈμ‹ν•λ‹¤. μ΄ λ§¥λ½μ—μ„ Mutable<*>μ€ Mutable<out Any?>μ²λΌ λ™μ‘ν•λ‹¤λ” λ»μ΄λ‹¤.
- κ·Έ μ΄μ λ” μ–΄λ–¤ λ¦¬μ¤νΈμ μ›μ† νƒ€μ…μ„ λ¨λ¥΄λ”λΌλ„ κ·Έ λ¦¬μ¤νΈμ—μ„ μ•μ „ν•κ² Any? νƒ€μ…μ μ›μ†λ¥Ό κΊΌλ‚΄μ¬ μλ” μμ§€λ§ νƒ€μ…μ„ λ¨λ¥΄λ” λ¦¬μ¤νΈμ— μ›μ†λ¥Ό λ§μλ€λ΅ λ„£μ„ μλ” μ—†κΈ° λ•λ¬Έμ΄λ‹¤.
